<!doctype html>

<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sherwood Burn Ban</title>
  <style>
    h1,
    p {
      text-align: center;
    }

    p span {
      display: block;
    }

    .yep,
    .nope {
      display: none;
    }

    .show {
      display: block;
    }
  </style>
</head>
<body>
  <h1>Sherwood Burn Ban</h1>
  <p>
    <span>Is there a</span>
    <span>burn ban</span>
    <span>in Bastrop County?</span>
  </p>
  <!-- Yes/No -->
  <div class="yep">
    <p>Yep!</p>
    <p>ðŸ§¯</p>
  </div>
  <div class="nope">
    <p>Nope!</p>
    <p>ðŸ”¥</p>
  </div>
  <p>
    <span>If there's an</span>
    <span>emergency</span>
  </p>
  <button>
    Ray (Phone Number)
  </button>
  <script>
    let countyId = 11 /* Bastrop: 11, Travis: 227 */
    let url = `https://tfsgis.tfs.tamu.edu/arcgis/rest/services/BurnBan/BurnBan/MapServer/0/query?f=json&outFields=BurnBan,County,CountyID&where=CountyID%3D${countyId}&returnGeometry=false`

    window.addEventListener('DOMContentLoaded', async () => {
      let response = await fetch(url)
      response = await response.json()
      let isBurnBan = response.features[0].attributes.BurnBan === 'Yes'

      if (isBurnBan) {
        document.querySelector('.yep').classList.add('show')
      } else {
        document.querySelector('.nope').classList.add('show')
      }
    })
  </script>
</body>
</html>
